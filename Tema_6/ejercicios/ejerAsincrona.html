<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script>

        function bolsa() {
            let paises = ["EspaÃ±a", "Holanda", "Austria", "Italia"];
            var tiempo = Math.floor(Math.random() * (8 - 1) + 1);

            const resultados = paises.map((pais) => ({
                nombre: pais,
                valor: Math.random() * (1 - 0) + 0,
            }));

            return new Promise(function (resolve, reject) {
                setTimeout(() => {
                    //console.log(resultados);
                    return resultados;

                    resolve();
                }, (tiempo * 1000));
            });
        }

        function metereologico() {
            var tiempo = Math.floor(Math.random() * (4 - 1) + 1);
            var numeroVector = Math.floor(Math.random() * (4 - 0) + 0);
            let array = ["soleado", "nublado", "lluvioso", "granizando", "tornado"];

            return new Promise(function (resolve, reject) {
                setTimeout(() => {
                    return array[numeroVector];
                    resolve();
                }, (tiempo * 1000));
            });
        }

        function unificarHtml(paises, tiempo) {

            var newUl = document.createElement('ul');
            var newItem1 = document.createElement('li');
            newItem1.textContent = paises[0].nombre + " vale " + paises[0].valor + " tiempo " + timepo;
            var newItem2 = document.createElement('li');
            newItem2.textContent = paises[1].nombre + " vale " + paises[1].valor;
            var newItem3 = document.createElement('li');
            newItem3.textContent = paises[2].nombre + " vale " + paises[2].valor;
            var newItem4 = document.createElement('li');
            newItem4.textContent = paises[3].nombre + " vale " + paises[3].valor;

            newUl.appendChild(newItem1);
            newUl.appendChild(newItem2);
            newUl.appendChild(newItem3);
            newUl.appendChild(newItem4);

            var body = document.body;
            var secondLista = body.querySelectorAll('ul')[1];
            body.appendChild(newUl);
        }


        /*
        async function resultado(){

            let resultado1 = await metereologico();
            let resultado2 = await bolsa(resultado1);
            unificarHtml(resultado1, resultado2);
        }

        resultado();
        setInterval(() => {
            unificarHtml(metereologico(), bolsa());
                }, 2000);
    */
        paises = bolsa();
        var newUl = document.createElement('ul');
        var newItem1 = document.createElement('li');
        newItem1.textContent = paises[0].nombre + " vale " + paises[0].valor;
        var newItem2 = document.createElement('li');
        newItem2.textContent = paises[1].nombre + " vale " + paises[1].valor;
        var newItem3 = document.createElement('li');
        newItem3.textContent = paises[2].nombre + " vale " + paises[2].valor;
        var newItem4 = document.createElement('li');
        newItem4.textContent = paises[3].nombre + " vale " + paises[3].valor;

        newUl.appendChild(newItem1);
        newUl.appendChild(newItem2);
        newUl.appendChild(newItem3);
        newUl.appendChild(newItem4);

        var body = document.body;
        var secondLista = body.querySelectorAll('ul')[1];
        body.appendChild(newUl);



    </script>

</body>

</html>